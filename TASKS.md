# 마이그레이션 및 개발 작업 목록

이 문서는 레거시 PHP 프로젝트의 기능을 새로운 Node.js/Next.js 프로젝트로 마이그레이션하고, 신규 기능을 개발하기 위한 작업 목록을 관리합니다.

## 인증 (Authentication)

- [x] **회원가입 로직 개선**
  - [x] 백엔드: `User` 모델에 `name`(닉네임), `email` 필드 추가
  - [x] 백엔드: 회원가입 API (`/api/auth/register`)에서 `name`, `email` 추가 입력받기
  - [x] 백엔드: `name`, `email` 중복 체크 로직 추가
  - [x] 프론트엔드: 회원가입 폼에 닉네임, 이메일 입력 필드 추가 및 유효성 검사

- [x] **카카오 OAuth 로그인 구현**
  - [x] 백엔드: 카카오 로그인 API 엔드포인트 (`/api/auth/kakao`) 생성
  - [x] 백엔드: 카카오 인증 코드를 받아 사용자 정보를 요청하고, 신규/기존 사용자 처리
  - [x] 백엔드: 로그인 성공 시 JWT 발급
  - [x] 프론트엔드: 로그인 페이지에 카카오 로그인 버튼 추가
  - [x] 프론트엔드: 카카오 로그인 콜백 처리 및 서버에 인증 코드 전송

- [x] **이메일 기반 차단 기능 구현**
  - [x] 백엔드: `BannedEmail` 모델 생성
  - [x] 백엔드: 회원가입 시 차단된 이메일인지 확인하는 로직 추가

- [x] **계정 삭제 유예 기능 구현**
  - [x] 백엔드: `User` 모델에 `deleteAfter` 필드 추가
  - [x] 백엔드: 로그인 시 `deleteAfter` 상태를 확인하여 로그인 제한
  - [x] 프론트엔드: 사용자 정보 페이지에 계정 삭제 요청 기능 추가

- [x] **2단계 인증 (OTP) 구현**
  - [x] 백엔드: 로그인 시 2FA 코드 생성 및 `KVStorage` 저장 로직 구현
  - [x] 백엔드: 로그인 API에서 OTP 검증 로직 구현
  - [x] 백엔드: OTP 미입력 시 `reqOTP` 응답 처리
  - [x] 프론트엔드: 로그인 모달 및 API 연동 (기존 구현 활용)

## 레거시 기능 마이그레이션 (New Features)

- [ ] **전투 시스템 개편 (MUD Battle)**
  - [ ] 백엔드: 기존 Voxel 전투 로직을 대체할 텍스트 로그 기반 전투 엔진 구현
  - [ ] 백엔드: 전투 턴(Round) 계산 및 결과 처리 로직 (`battle_simulator.php` 참고)
  - [ ] 프론트엔드: 전투 로그를 시각적으로 보여주는 텍스트 기반 UI 구현
  - [ ] 프론트엔드: 복셀 뷰어 대신 텍스트 리포트 뷰어 연결

- [ ] **외교 시스템 (Diplomacy)**
  - [ ] 백엔드: `Diplomacy` 모델 및 컨트롤러 생성 (`t_diplomacy.php` 참고)
  - [ ] 백엔드: 외교 문서 발송(선전포고, 동맹, 불가침) 및 수락/거절 로직
  - [ ] 프론트엔드: 국가 간 외교 상태 현황판 및 외교 문서함 UI

- [ ] **토너먼트 (Tournament)**
  - [ ] 백엔드: 정기 토너먼트 스케줄러 및 대진표 생성 로직 (`b_tournament.php` 참고)
  - [ ] 백엔드: 장수 간 1:1 일기토 시뮬레이션 로직
  - [ ] 프론트엔드: 토너먼트 대진표 및 경기 결과 뷰어

- [ ] **역사 및 연표 (History)**
  - [ ] 백엔드: 주요 사건(전쟁, 건국, 멸망 등) 기록 로직 (`v_history.php` 참고)
  - [ ] 프론트엔드: 서버 연대기(타임라인) UI

- [ ] **휴가 모드 (Vacation)**
  - [ ] 백엔드: 장수 휴가 신청/복귀 로직 및 자원 동결 처리
  - [ ] 프론트엔드: 설정 페이지 내 휴가 신청 UI

## 레거시 코드 정리

- [ ] **`gin7`, `logh` 코드네임 제거**
  - [ ] 백엔드: 관련 파일, 변수명, 설정 등에서 `gin7`, `logh` 참조 제거
  - [ ] 프론트엔드: 관련 파일, 변수명, 설정 등에서 `gin7`, `logh` 참조 제거